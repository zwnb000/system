(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7e38"],{5315:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 新闻分类")])],1)],1),a("div",{staticClass:"container"},[a("el-tree",{attrs:{data:t.treeData,"default-expand-all":"","highlight-current":!0,"render-content":t.renderContent}})],1),a("el-dialog",{attrs:{title:"新增分类",visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"上级分类"}},[t._v("\n                    "+t._s(t.form.path)+"\n                ")]),a("el-form-item",{attrs:{label:"分类名称",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addClass}},[t._v("确 定")])],1)],1)],1)])},n=[],r={name:"tres",data:function(){return{treeData:[{label:"新闻分类",id:0}],addVisible:!1,form:{title:"",parentid:0,path:""},rules:{title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},created:function(){this.loadTreeData()},methods:{loadTreeData:function(){var t=this;t.$axios.get("/users/getClass").then(function(e){e.data.flag?t.$set(t.treeData[0],"children",e.data.data):alert(e.data.msg)})},append:function(t,e,a){var s=[];function n(t){return s.push(t.label),t.parent.label?n(t.parent):s.reverse().join(" > ")}this.form.path=n(t),this.form.parentid=t.data.id,this.form.title="",this.addVisible=!0},addClass:function(){var t=this;t.$refs["form"].validate(function(e){if(!e)return!1;t.$axios.get("/users/addClass?parentId1=".concat(t.form.parentid,"&title1=").concat(t.form.title)).then(function(e){e.data.flag?(t.$message({type:"success",message:"添加成功!"}),t.loadTreeData(),t.addVisible=!1):t.$message({type:"error",message:e.data.msg})})})},remove:function(t,e){var a=this;a.$confirm("此操作将永久删除这个分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("/users/delClass",{id:e.id}).then(function(t){t.data.flag?(a.$message({type:"success",message:"删除成功!"}),a.loadTreeData()):a.$message({type:"error",message:t.data.msg})})}).catch(function(){})},renderContent:function(t,e){var a=this,s=e.node,n=e.data,r=e.store;return t("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[t("span",[t("span",[s.label])]),t("span",[t("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.append(s,n,r)}}},["添加"]),t("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.remove(s,n)}}},["删除"])])])}}},i=r,l=a("2877"),o=Object(l["a"])(i,s,n,!1,null,"35c9ce09",null);e["default"]=o.exports}}]);