(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-436b1dfe"],{"83e4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("默认 click 触发子菜单")]),a("el-cascader",{attrs:{options:t.userlist,props:t.props},on:{change:t.handleChange},model:{value:t.formdata.classid,callback:function(e){t.$set(t.formdata,"classid",e)},expression:"formdata.classid"}}),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.add}},[t._v("添加")])],1),a("div",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.drawer=!0}}},[t._v("\n            点我查看新闻\n        ")]),a("div",[a("el-drawer",{attrs:{title:"新闻列表",visible:t.drawer,direction:"ltr","before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[a("span",[t._v("我来啦!")]),a("el-tree",{attrs:{data:t.userlist,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1)],1)],1),a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 基础表格")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:t.delAll}},[t._v("批量删除")]),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.newslist,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"tm",label:"日期",sortable:"",formatter:t.formatter}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":10},on:{"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",width:"30%"},on:{click:t.bianji}}),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.key,expression:"key"}],staticClass:"shadow"},[a("div",{staticClass:"box"},[a("el-form",{ref:"form",attrs:{model:t.formdata,"label-width":"50px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px",width:"95%"},attrs:{label:"标题"}},[a("el-input",{model:{value:t.formdata.title,callback:function(e){t.$set(t.formdata,"title",e)},expression:"formdata.title"}})],1),a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},model:{value:t.formdata.content,callback:function(e){t.$set(t.formdata,"content",e)},expression:"formdata.content"}})],1),a("div",{staticClass:"box2"},[a("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:t.tijiao}},[t._v("提交")]),a("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:t.quxiao}},[t._v("取消")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewKey,expression:"viewKey"}],staticClass:"shadow"},[a("div",{staticClass:"box"},[a("el-form",{ref:"form",attrs:{model:t.newslists[0],"label-width":"50px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px",width:"95%"},attrs:{label:"标题"}},[a("el-input",{model:{value:t.newslists[0].title,callback:function(e){t.$set(t.newslists[0],"title",e)},expression:"newslists[0].title"}})],1),a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},model:{value:t.newslists[0].content,callback:function(e){t.$set(t.newslists[0],"content",e)},expression:"newslists[0].content"}})],1),a("div",{staticClass:"box2"},[a("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("提交")]),a("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:function(e){t.viewKey=!1}}},[t._v("取消")])],1)],1)])])},s=[],l=(a("a753"),a("8096"),a("14e1"),a("953d")),n={name:"news",data:function(){return{addVisible:!1,editVisible:!1,delVisible:!1,props:{value:"id",emitPath:!1},value:[],tableData:[],cur_page:1,total:1,del_list:[],select_word:"",is_search:!1,userlist:[],newslist:[],newslists:[{title:"",content:"",id:0}],multipleSelection:[],defaultProps:{children:"children",label:"label"},formdata:{title:"",classid:"",content:""},form:{id:""},redata:0,viewKey:!1,key:!1,forms:{tit:"",cont:"",ids:0},ida:0,content:"",editorOption:{placeholder:""},idd:0,drawer:!1}},components:{quillEditor:l["quillEditor"]},created:function(){var t=this;this.shuaxin(),this.yeshu(),t.$axios.get("/users/getClass").then(function(e){e.data.flag?t.userlist=e.data.data:alert(e.data.msg)})},methods:{formatter:function(t,e){var a=new Date(t.tm);return a.getFullYear()+"年"+(a.getMonth()+1)+"月"+a.getDate()+"日"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()},handleCurrentChange:function(t){var e=this;this.cur_page=t,e.shuaxin()},handleNodeClick:function(t){this.redata=t,console.log(this.redata);var e=this;this.$axios.post("/api/newslist",{arrId:t.id,page:1}).then(function(t){t.data.flag?(alert(t.data.msg),e.newslist=t.data.data):alert(t.data.msg)})},bianji:function(){this.viewKey=!0},add:function(){this.key=!0},quxiao:function(){var t=this;this.key=!1,t.formdata.content="",t.formdata.title=""},tijiao:function(){this.key=!1;var t=this;this.$axios.get("/api/news?title1=".concat(t.formdata.title,"&classid=").concat(t.formdata.classid,"&content=").concat(t.formdata.content)).then(function(e){e.data.flag?(alert(e.data.msg),t.shuaxin(),t.yeshu()):alert(e.data.msg),t.formdata.content="",t.formdata.title=""})},handleChange:function(t){this.form.classid=t},handleDelete:function(t,e){this.delVisible=!0,this.ida=e.id},handleEdit:function(t,e){this.viewKey=!0;var a=this;this.$axios.post("/api/lists",{ids:e.id}).then(function(t){t.data.flag&&(a.newslists=t.data.data,a.shuaxin(),a.yeshu())}),this.editVisible=!0,this.ids=e.id,alert(this.ids)},saveEdit:function(){var t=this;this.viewKey=!1,console.log(t.newslists),this.$axios.get("/api/newsup?id=".concat(t.newslists[0].id,"&tit=").concat(t.newslists[0].title,"&cont=").concat(t.newslists[0].content)).then(function(e){e.data.flag?(alert(e.data.msg),t.shuaxin(),t.yeshu()):alert(e.data.msg)})},deleteRow:function(){this.delVisible=!1;var t=this;this.$axios.get("/users/delenews?id=".concat(t.ida)).then(function(e){e.data.flag&&(alert(e.data.msg),t.shuaxin(),t.yeshu())})},delAll:function(){for(var t=this,e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].id);console.log(e),this.$axios.post("/api/deleall",{delList:e,page:this.cur_page}).then(function(e){e.data.flag?(t.$message.success("删除成功"),t.total=e.data.data[0].total,t.shuaxin(),t.yeshu()):t.$message.success(e.data.msg)})},handleSelectionChange:function(t){this.multipleSelection=t},search:function(){var t=this;this.$axios.post("/api/chazhao/",{title:this.select_word}).then(function(e){e.data.flag?(t.newslist=e.data.data,t.total=e.data.data[0].total):alert(e.data.msg)})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},yeshu:function(){var t=this;this.$axios.post("/api/newslist",{arrId:this.idd,page:this.cur_page}).then(function(e){e.data.flag?(t.newslist=e.data.data,t.total=e.data.data[0].total,console.log(t.total)):alert(e.data.msg)})},shuaxin:function(){var t=this;t.$axios.post("/api/list").then(function(e){e.data.flag?(t.newslist=e.data.data,t.yeshu()):alert(e.data.msg)})}}},o=n,r=(a("a91d"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"5854ab9a",null);e["default"]=c.exports},a91d:function(t,e,a){"use strict";var i=a("b82f"),s=a.n(i);s.a},b82f:function(t,e,a){}}]);